{%  load static %}
<!DOCTYPE html>
<html lang="en">
  
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="{{setting_obj.favicon}}">
    <title>Exam Report - Admin</title>
    <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/perfect-scrollbar/css/perfect-scrollbar.css" %}"/>
    <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/material-design-icons/css/material-design-iconic-font.min.css" %}"/>
    <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/jquery.vectormap/jquery-jvectormap-1.2.2.css" %}"/>
    <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/jqvmap/jqvmap.min.css" %}"/>
    <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/datetimepicker/css/bootstrap-datetimepicker.min.css" %}"/>
   <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/select2/css/select2.min.css" %}"/>
   
   <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/datatables/datatables.net-bs4/css/dataTables.bootstrap4.css" %}"/>
   <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/datatables/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css" %}"/>
   <link rel="stylesheet" href="{% static "admin/assets/css/app.css" %}" type="text/css"/>
   <link rel="stylesheet" type="text/css" href="{% static "admin/assets/lib/multiselect/css/multi-select.css" %}"/>
   <link rel="stylesheet" type="text/css"  href="{% static "admin/assets/lib/morrisjs/morris.css" %}"/>
    
  </head>
  <body>
    <div class="be-wrapper be-fixed-sidebar">
      <nav class="navbar navbar-expand fixed-top be-top-header">
        <div class="container-fluid">
          <div class=""><a class="navbar-brand" href="#"></a>
          </div>
          <div class="page-title">{% if setting_obj.logo != ''%} <img style="height:30px;" src="{{setting_obj.logo}}"> {% else %}  <span><i>Top Academy</i></span>  {% endif %}</div>
          <div class="be-right-navbar">
            <ul class="nav navbar-nav float-right be-user-nav">
              <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-expanded="false"><img src="{% static "admin/assets/img/avatar.png"%}"" alt="Avatar"><span class="user-name">{{user_login.first_name}}</span></a>
                <div class="dropdown-menu" role="menu">     
                  <div class="user-info">
                    <div class="user-name">{{user_login.first_name}}</div>
                    <div class="user-position online">Available</div>
                  </div><a class="dropdown-item" href="/admin-panel/account"><span class="icon mdi mdi-face"></span>My Account</a><a class="dropdown-item" href="/admin-panel/settings"><span class="icon mdi mdi-settings"></span>Settings</a><a class="dropdown-item" href="/admin-panel/logout"><span class="icon mdi mdi-power"></span>Logout</a>
                </div>
              </li>
            </ul>
            
          </div>
        </div>
      </nav>
      <div class="be-left-sidebar">
        <div class="left-sidebar-wrapper"><a class="left-sidebar-toggle" href="/admin-panel/">Dashboard</a>
          <div class="left-sidebar-spacer">
            <div class="left-sidebar-scroll">
              <div class="left-sidebar-content">
                <ul class="sidebar-elements">
                  <li class="divider">Menu</li>
                  
                  <li class=" active"><a href="/admin-panel/"><i class="icon mdi mdi-face"></i><span>Dashboards</span></a>
                   </li>

                  <li class="parent"><a href="charts.html"><i class="icon mdi mdi-chart-donut"></i><span>Test Bank</span></a>
                    <ul class="sub-menu">
                      <li><a href="/admin-panel/add/test">New Test</a>
                      </li>
                      
                      <li><a href="/admin-panel/test/">Manage Test</a>
                      </li>

                      <li><a href="/admin-panel/test/">Test Action</a>
                      </li>
                     
                    </ul>
                  </li>

                  <li class="parent"><a href="#"><i class="icon mdi mdi-dot-circle"></i><span>Learning</span></a>
                    <ul class="sub-menu">
                      
                      <li><a href="/admin-panel/post/add">New Post</a>
                      </li>
                      <li><a href="/admin-panel/post/">My Posts</a>
                      </li>
                    </ul>
                  </li>
                  <li class="parent"><a href="#"><i class="icon mdi mdi-border-all"></i><span>Manage Users</span></a>
                    <ul class="sub-menu">
                      <li><a href="/admin-panel/students/">Students</a>
                      </li>

                      <li><a href="/admin-panel/staff/add">Staff</a>
                      </li>

                      <li><a href="/admin-panel/user/admin">Admin</a>
                      </li>
                    </ul>
                  </li>

                  <li class="parent"><a href="#"><i class="icon mdi mdi-chart"></i><span>Reports</span></a>
                    <ul class="sub-menu">
                      <li><a href="/admin-panel/report/test">Test Report</a>
                      </li>

                      <li><a href="/admin-panel/report/exam">Exam Report</a>
                      </li>

                      <li><a href="/admin-panel/report/staff">Saff Activity</a>
                      </li>
                    </ul>
                  </li>

                  
                  <li class="parent"><a href="#"><i class="icon mdi mdi-dot-circle"></i><span>Account</span></a>
                    <ul class="sub-menu">
                      <li><a href="/admin-panel/account">My Account</a></li>
                    </ul>
                  </li>
                  <li class="divider">Other</li>
                  
                  <li class="parent"><a href="charts.html"><i class="icon mdi mdi-chart-donut"></i><span>Setup Website</span></a>
                    <ul class="sub-menu">
                      <li><a href="/admin-panel/steam">Question Bank Categories</a>
                      </li>
                      <li><a href="/admin-panel/branch"> College Programmes</a>
                      </li>
                      
                      <li><a href="/admin-panel/settings">Website Settings</a>
                      </li>
                     
                    </ul>
                  </li>
                  <li><a href="/admin-panel/announcement"><i class="icon mdi mdi-inbox"></i><span>Announcements</span></a>
                    
                  </li>
               
                  <li><a href="/admin-panel/session/"><i class="icon mdi mdi-assignment-account"></i><span>Session Manager</span></a>
                  </li>
                  <li><a href="/admin-panel/docs"><i class="icon mdi mdi-book"></i><span>Website Manual</span></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          
        </div>
      </div>
      <div class="be-content">

            <div class="card-header pb-3">
  
                    <div class="row">
                        <div class="col-md-4">
                          <form method="POST">
                        {% csrf_token %}
                                <div class="input-group mb-3">
                                        <select name="exam_id" class="form-control form-control-xs">
                                            <option value="">Select Exam</option>
                                        {% for exam in all_exam %}
                                          <option value="{{exam.id}}">{{exam.test_name}}</option>
                                        {% endfor %}
                                        </select>
                                        <div class="input-group-append">
                                          <button class="btn btn-primary" type="submit">Show Report</button>
                                        </div>
                                      </div> 
                                    </div>
                                  </form>
             
                    </div>

                  </div>
              <div class="main-content container-fluid">
                    {% if messages %}


                    {% for message in messages %}
        
                     <div class="alert alert-{{message.tags}} alert-dismissible" role="alert">
                        <button class="close" type="button" data-dismiss="alert" aria-label="Close"><span class="mdi mdi-close" aria-hidden="true"></span></button>
                        <div class="icon"><span class="mdi mdi-alert-triangle"></span></div>
                        <div class="message">{{message}}</div>
                      </div>
        
                    {% endfor %}
                 {% endif %}

                 {% if report == False %}
<h2 class="text-center">Select a Exam First!</h2>
<p class="text-center">Selecet the Exam you want get the Report of.</>
                 {% endif %}
                 {% if report == True %}
                 <div class="row">
                    <div class="col-md-12">
                      <div class="float-right">
                                  <button class="btn btn-warning btn-md">Send Report to Email</button>      
                                  <a href="/admin-panel/report/monitor/exam/{{exam.id}}" class="btn btn-primary btn-md">Real time Monitoring</a>       
                                  <a href="/admin-panel/report/exam/pdf/{{exam.id}}" class="btn btn-success btn-md">Print Report</a>
                                       
                                </div>   
                 </div> </div>
                 <br>
                 <div class="row">
                 
                    <div class="col-lg-4">

                        <div class="card card-table">
                            <div class="card-header">Top 5 Performer
                              
                            </div>
                            <div class="card-body">
                              <table class="table">
                                <thead>
                                  <tr>
                                    <th style="width:50%;">Name</th>
                                    <th style="width:10%;"  class="number">Score</th>
                                    <th style="width:10%;"  class="number">%</th>
                                    <th style="width:10%;" class="number">Rank</th>
                                  </tr>
                                </thead>
                                <tbody class="no-border-x">
                                    {% for key, top in topper_data.items %}
                                    <tr>
                                      <td class="user-avatar cell-detail user-info"> <img src="http://127.0.0.1:8000/static/admin/assets/img/avatar.png" alt="Avatar">{{top.FullName}}<span class="cell-detail-description">{{top.EnrollNo}}</span></td>
                                      <td class="milestone"><span class="completed">{{top.Scored}} / {{top.TotalMarks}}</span><span class="version">{{top.Result_Status | upper}}</span>
                                        <div class="progress">
                                          <div class="progress-bar progress-bar-primary" style="width: {{top.per}}%;"></div>
                                        </div>
                                      </td>
                                      <td class="number">{{top.per}}%</td>
                                      <td class="number"><b>{{key}}</b></td>
                                    </tr>
                                    {% endfor %}
                                  </tbody>
                              </table>
                            </div>
                          </div>

                        
                    </div>
                    <div class="col-lg-3">
                        
                      <div class="card card-default">
                        <div class="card-header"> 
                          <div class="tools"><span class="icon s7-upload"></span><span class="icon s7-edit"></span><span class="icon s7-close"></span></div><span class="title">Submission Ratio</span>
                        </div>
                        <div class="card-body text-center">
                            
                            <div class="widget-chart-container ">
                                <div class="counter">
                                    <div class="value">{{ratio}}%</div>
                                    <div class="desc">RATIO</div>
                                  </div>
                                <div id="pie-chart4" style="height: 200px;"></div>
                            </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-5">
                        <div class="user-info-list card">
                            <div class="card-header">Exam Information </div>
                            <div class="card-body">
                              <table class="no-border no-strip skills">
                                <tbody class="no-border-x no-border-y">
                                    <tr>
                                        <td class="icon"><span class="mdi mdi-case"></span></td>
                                        <td class="item"> Exam Name<span class="icon s7-portfolio"></span></td>
                                        <td>{{exam.test_name}} <span class="badge badge-primary">{{test.TestDifficulty}}</span> </td>
                                      </tr>
                                      <tr>
                                          <td class="icon"><span class="mdi mdi-timer"></span></td>
                                          <td class="item"> Timing<span class="icon s7-portfolio"></span></td>
                                          <td>{{test_adv.DurationFrom}} - {{test_adv.DurationTo}} </td>
                                        </tr>
                                        <tr>
                                            <td class="icon"><span class="mdi mdi-shape"></span></td>
                                            <td class="item"> Category <span class="icon s7-shape"></span></td>
                                            <td><span class="">{{test.category_two}}</span>, <span class="">{{test.category_one}}</span>, <span class="">{{test.steam}}</span> </td>
                                          </tr>
                                        
                                  <tr>
                                    <td class="icon"><span class="mdi mdi-landscape"></span></td>
                                    <td class="item"> Year / Branch<span class="icon s7-portfolio"></span></td>
                                    <td>{{test.SCTSemester}} Yr/Sem, {{test.SCTBranch}} </td>
                                  </tr>
                                  <tr>
                                    <td class="icon"><span class="mdi mdi-graduation-cap"></span></td>
                                    <td class="item">Program<span class="icon s7-gift"></span></td>
                                    <td>{{test.SCTSteam}}</td>
                                  </tr>
                                 </tbody>
                              </table>
                            </div>
                          </div>
                    </div>
                  </div>
                <div class="row">
                        <div class="col-lg-12">
                           
                            
                                <div class="card card-table">
                                  
                                    <div class="card-header">Student Submissions 
                                     
                                      </div>       
                                        <div class="table-responsive ">
                                          <table class="table table-striped table-hover table-fw-widget" id="table3">
                                          
                                            <tbody>
                                              {% for key, sub in submission_data.items %}
                                              <tr>
                                                
                                                <td class="user-avatar cell-detail user-info"><img src="http://127.0.0.1:8000/static/admin/assets/img/avatar.png" alt="Avatar"><span>{{sub.FullName}}</span><span class="cell-detail-description">{{sub.EnrollNo}}</span></td>
                                              
                                                <td class="milestone">
                                                  
                                                  <span class="completed">{{sub.Scored}} / {{sub.TotalMarks}}</span><span class="version">{{sub.Result_Status | upper}}</span>
                                                  <div class="progress">
                                                    <div class="progress-bar progress-bar-primary" style="width: {{sub.per}}%;"></div>
                                                  </div>
                                                
                                                
                                                </td>
                                                <td class="cell-detail"> <span>{{sub.Started}}</span><span class="cell-detail-description">Start Time</span></td>
                                                <td class="cell-detail"> <span class="text-bold">{{sub.Submitted}}</span><span class="cell-detail-description">Submission Time</span></td>
                                                <td class="cell-detail"> <span class="text-bold">{{sub.correct}} | {{sub.wrong}}</span><span class="cell-detail-description">Correct vs Wrong</span></td>
                                                
                                                <td class="cell-detail"> <div class="switch-button switch-button-xs switch-button-yesno">
                                                        <input disabled type="checkbox" {% if sub.Attendance %} checked {% endif %} name="swt1" id="swt1"><span>
                                                          <label for="swt1"></label></span>
                                                      </div></td>
                                                
                                                <td class="text-right">
                                                
                                                        <a href="/admin-panel/report/exam/submission/session/{{sub.ExamSession}}" class="btn btn-sm btn-success"><i class="icon icon-left mdi mdi-chart"></i>in-Depth Report</a>
                                                </td>
                                              
                                            </tr>
{% endfor %}
                                            


                                                    

                                                      
                                                         
                                           
                                 
                                            </tbody>
                                          </table>
                                  
                                      </div>
                                </div>
                              </div>
                          
                    
                        </div>
                        
                        {% endif %}
                      </div>
                  
        </div>
      </div>
     
    </div>
    <script src="{% static "admin/assets/lib/jquery/jquery.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/perfect-scrollbar/js/perfect-scrollbar.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/bootstrap/dist/js/bootstrap.bundle.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/js/app.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/jquery-flot/jquery.flot.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/jquery-flot/jquery.flot.pie.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/jquery-flot/jquery.flot.time.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/jquery-flot/jquery.flot.resize.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/jquery-flot/plugins/jquery.flot.orderBars.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/jquery-flot/plugins/curvedLines.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/jquery-flot/plugins/jquery.flot.tooltip.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/chartjs/Chart.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/countup/countUp.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/raphael/raphael.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/morrisjs/morris.min.js" %}"  type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net/js/jquery.dataTables.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-bs4/js/dataTables.bootstrap4.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-buttons/js/dataTables.buttons.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-buttons/js/buttons.flash.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/jszip/jszip.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/pdfmake/pdfmake.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/pdfmake/vfs_fonts.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-buttons/js/buttons.colVis.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-buttons/js/buttons.print.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-buttons/js/buttons.html5.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-responsive/js/dataTables.responsive.min.js" %}" type="text/javascript"></script>
    <script src="{% static "admin/assets/lib/datatables/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js" %}" type="text/javascript"></script>
    
    <script type="text/javascript">
      

      $(document).ready(function(){
      
        //$(".select2").select2();
      	//-initialize the javascript
        App.init();
      
        var e, t, i, o, n, a, r, l, s, c, d, u, p, h, f, g, m, b, v = {
          assetsPath: "assets",
          imgPath: "img",
          jsPath: "js",
          libsPath: "lib",
          leftSidebarSlideSpeed: 200,
          leftSidebarToggleSpeed: 300,
          enableLeftSidebar: !0,
          enableSwipe: !0,
          swipeTreshold: 100,
          scrollTop: !0,
          openRightSidebarClass: "open-right-sidebar",
          openLeftSidebarClass: "open-left-sidebar",
          disabledLeftSidebarClass: "be-left-sidebar-disabled",
          offCanvasLeftSidebarClass: "be-offcanvas-menu",
          offCanvasLeftSidebarMobileClass: "be-offcanvas-menu-sm",
          topHeaderMenuClass: "be-top-menu",
          closeRsOnClickOutside: !0,
          removeLeftSidebarClass: "be-nosidebar-left",
          collapsibleSidebarClass: "be-collapsible-sidebar",
          collapsibleSidebarCollapsedClass: "be-collapsible-sidebar-collapsed",
          openLeftSidebarOnClick: !0,
          transitionClass: "be-animate",
          openSidebarDelay: 400
      },
      w = {},
      k = {};
 
      n = App.color.warning, a = App.color.success, r = App.color.primary, Morris.Donut({
        element: "pie-chart4",
        data: [{
            label: "Submissions",
            value: {{submission}}
        }, {
            label: "Total Students",
            value: {{total_students}}
        }],
        colors: [n, a, r],
        formatter: function(e) {
            return e
        }
    })

      });
    </script>
  </body>
</html>